# 行動経済学実験の統計分析

R言語を用いた行動経済学実験データの統計分析プロジェクト

## 概要

このリポジトリは、日本人工知能学会第39回全国大会（JSAI2025）で発表した論文「**行動がAIに学習されると知ったとき，人はどう変わるのか―向社会性の変化に関する実証研究―**」のデータ分析コードです。

### 研究背景
AI技術の進歩により、人間の行動データが機械学習のために収集・分析される機会が増加しています。本研究では、自分の行動がAIに学習されることを知った参加者の社会的選好（向社会性）がどのように変化するかを、独裁者ゲーム実験を通じて実証的に検証しました。

### 研究手法
分析手法は Klockmann et al.(2022) の先駆的研究を基礎とし、Fehr-Schmidtモデルによる社会的選好の定量化を中心とした包括的な統計分析を実施しています。

## 技術スタック

- **言語**: R (>= 4.0.0)
- **コアパッケージ**: 
  - `tidyverse`: データ操作、パイプライン処理、基本可視化
  - `lme4`: 線形混合効果モデル、階層モデル
  - `ggplot2`: 高度なデータ可視化（tidyverseに含まれるが独立して重要）
  - `stats`: 基本統計解析、回帰分析
- **統計・モデリング**:
  - `car`: 回帰診断、VIF計算、Anova
  - `emmeans`: 周辺平均、多重比較
  - `optimx`: 最適化アルゴリズム、パラメータ推定
  - `rstatix`: パイプライン対応統計解析
  - `effectsize`: 効果量計算
- **可視化・レポート**:
  - `viridis`: カラーユニバーサルデザイン対応パレット
  - `gridExtra`, `patchwork`: 複数プロット配置
  - `sjPlot`: モデル結果の可視化
  - `knitr`, `rmarkdown`: 動的レポート生成
- **専門分析**:
  - `cluster`, `factoextra`: クラスタ分析
  - `corrplot`, `psych`: 相関・心理統計分析
  - `rpart`, `rpart.plot`: 決定木分析
  - `performance`: モデル診断・評価

## プロジェクト構造

```
jsai2025_R/
├── README.md                          # プロジェクト概要・使用方法
├── .gitignore                         # Git除外設定
├── word.Rmd                          # 論文用の図表作成
├── analysis/                          # 分析スクリプト集
│   ├── choice_analysis/              # 選択行動分析
│   ├── payoff_avg_analysis/          # 報酬分析  
│   ├── social_preference_analysis/   # 社会的選好分析
│   ├── payoff_preference_analysis/   # 選好と行動の整合性分析
│   ├── altruism_analysis/            # 利他性要因分析
│   ├── time_analysis/                # 意思決定時間分析
│   ├── choice_reason_analysis/       # 選択理由分析
│   └── lamda_genin/                  # 選択感度要因分析
├── document/                          # 分析結果・ドキュメント
│   ├── Result.md                     # 分析結果サマリー
│   └── doc_parameta                  # パラメータ設定
├── Experiment/                        # 実験設計ファイル
│   └── payoffTable.csv               # 報酬表・シナリオ設定
├── Research/                          # 研究関連資料
└── AI2025_data/                      # 実験データ（非公開）
    ├── 20250117_3/                   # AI条件（第1回）
    ├── 20250117_4/                   # コントロール条件（第1回）
    ├── 20250120_4/                   # コントロール条件（第2回）
    └── 20250120_5/                   # AI条件（第2回）
```

## 分析内容

### 1. 選択行動分析 (`choice_analysis/`)
- **主要分析**: AI条件とコントロール条件でのY選択比率の比較
- **統計手法**: カイ二乗検定、t検定（参加者レベル）
- **追加分析**: 
  - 制限サンプル分析（利害対立ケースのみ）
  - ラウンド別選択パターンの可視化
  - 参加者レベルでの選択比率分析

### 2. 社会的選好分析 (`social_preference_analysis/`)
- **理論モデル**: Fehr-Schmidtモデルに基づく不平等回避選好の推定
- **パラメータ**: α（不利な不平等回避）、β（有利な不平等回避）、λ（選択感度）
- **分析手法**: 最尤推定法、混合効果モデル
- **追加要素**:
  - **Klockmann et al.(2022)の制限サンプル分析**: 利害対立ケースに限定した頑健性検証
  - 立場別（有利・不利・混合）の利己選択率分析
  - ブートストラップ法による頑健性検証

### 3. 報酬分析 (`payoff_avg_analysis/`)
- **基本統計**: 条件別の平均報酬額と分散の計算
- **統計検定**: Welchのt検定による条件間差異の検定
- **可視化**: 箱ひげ図、密度プロット

### 4. 選好と報酬の関係分析 (`payoff_preference_analysis/`)
- **目的**: 自己申告選好（利己性、平等性、効率性、競争性）と実際の報酬額の関係
- **統計手法**: 線形回帰分析、混合効果モデル
- **交互作用**: 選好×条件の交互作用効果の検証
- **多重共線性**: VIF（分散膨張因子）による診断

### 5. 利他性要因分析 (`altruism_analysis/`) ※AI条件のみ
- **従属変数**: 受け手への配分額（利他性の指標）
- **説明変数**: 平等選好、テクノロジー信頼度、AI満足度
- **統計手法**: 階層線形モデル（HLM）
- **モデル比較**: ランダム切片 vs ランダム係数モデル
- **診断**: 残差の正規性検定、QQプロット

### 6. 意思決定時間分析 (`time_analysis/`)
- **データ**: PageTimesデータから意思決定所要時間を算出
- **統計手法**: 線形混合効果モデル
- **外れ値処理**: 上位1%を除外、ゼロ秒データの除去
- **可視化**: 箱ひげ図、密度プロット

### 7. 選択理由分析 (`choice_reason_analysis/`)
- **分析対象**: アンケートによる選好の自己申告データ
- **統計手法**: 相関分析、クラスタ分析、決定木分析
- **条件間比較**: AI条件とコントロール条件での選好プロファイルの差異
- **高度な分析**: 非線形関係の検証、閾値効果の分析

### 8. 選択感度要因分析 (`lamda_genin/`)
- **目的**: 選択の一貫性（λパラメータ）に影響する要因の特定
- **説明変数**: AI理解度、AI評価、選好自己評価、意思決定時間
- **統計手法**: 重回帰分析、構造方程式モデリング
- **媒介分析**: AI理解度→選択感度→選好一貫性のパス解析


### 分析の関連性
各分析は独立して実行可能ですが、相互に関連しています：
- **基礎分析**: `choice_analysis` → `payoff_avg_analysis`
- **発展分析**: `social_preference_analysis` → `payoff_preference_analysis`
- **深度分析**: `altruism_analysis`, `time_analysis`, `choice_reason_analysis`

## 分析手法

### 主要統計手法
- **記述統計**: 平均・分散・分布の可視化
- **推測統計**: t検定、カイ二乗検定、ANOVA
- **回帰分析**: 線形・ロジスティック・多項回帰
- **混合効果モデル**: ランダム切片・ランダム係数モデル
- **最尤推定**: 社会的選好パラメータの推定（Fehr-Schmidtモデル）
- **クラスタ分析**: 選好パターンの類型化
- **決定木分析**: 意思決定プロセスの構造解析

## 注意事項

- これは個人的な研究記録として作成したものです
- 厳密な学術プロジェクトではなく、質問・引用等への対応はできかねます
- 実験データは倫理的配慮により非公開

### 技術的制約
- R 4.0.0以上を推奨
- パラメータ推定値は実験設計に依存するため一般化に注意

## 参考文献

Klockmann, V., Schenk-Hoppe, K. R., & Villeval, M. C. (2022). Artificial intelligence, ethics, and intergenerational responsibility. *Journal of Economic Behavior & Organization*, 203, 284-317.

